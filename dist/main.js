(()=>{"use strict";function e(e){var t=[];return{getName:function(){return e},setName:function(t){return e=t},getTask:function(e){return t.find((function(t){return t.getTitle()===e}))},getTasks:function(){return t},addTask:function(e){var n=e.getTitle();t.some((function(e){return e.getTitle()===n}))?alert("A task with the same title already exists, please try with a different name."):t.push(e)},getTomorrowsTasks:function(){return t.filter((function(e){return t=e.getDueDate(),n=new Date,t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()-1===n.getDate();var t,n}))},deleteTask:function(e){t.splice(t.indexOf(e),1)}}}function t(e,t,n,a){return{getDescription:function(){return t},getDueDate:function(){return n},getPriority:function(){return a},getTitle:function(){return e},setTitle:function(t){return e=t},setDescription:function(e){return t=e},setDueDate:function(e){return n=e},setPriority:function(e){return a=e}}}var n,a;const r=(n=[],{getProject:function(e){return n.find((function(t){return t.getName()===e}))},getProjects:function(){return n},addProject:a=function(e){var t=e.getName();n.some((function(e){return e.getName()===t}))?alert("A Project with the same name already exists, please try with a different name."):n.push(e)},deleteProject:function(e){n.splice(n.indexOf(e),1)},saveProjects:function(){var e=n.map((function(e){var t=e.getTasks().map((function(e){return{title:e.getTitle(),description:e.getDescription(),dueDate:{year:e.getDueDate().getFullYear(),month:e.getDueDate().getMonth(),day:e.getDueDate().getDate()},priority:e.getPriority()}}));return{name:e.getName(),tasks:t}}));localStorage.setItem("todoList",JSON.stringify(e))},getProjectsFromStorage:function(){var n=JSON.parse(localStorage.getItem("todoList"));console.log(n),n.forEach((function(n){var r=e(n.name);return n.tasks.forEach((function(e){var n=t(e.title,e.description,new Date(e.dueDate.year,e.dueDate.month,e.dueDate.day),e.priority);r.addTask(n)})),a(r)}))}}),i=function(){var n,a=document.createElement("div");a.id="tasks-container";var i=document.createElement("header"),o=function(e){if("task-div"==e.target.className)"none"===(a=e.path[1].children[1]).style.display?a.style.display="grid":a.style.display="none";else{if("task-div"!==e.target.parentNode.className)return;var t=n.getTask(e.path[1].innerText);"fas fa-pen edit-task-button"===e.target.className?l(t):(n.deleteTask(t),r.saveProjects(),c())}var a},c=function(){a.innerHTML="",n.getTasks().forEach((function(e){var t=document.createElement("div");t.className="task-container",t.innerHTML='<div class="task-div"><input type="checkbox">'.concat(e.getTitle(),'<i class="fas fa-pen edit-task-button"></i></div>'),t.children[0].addEventListener("click",o);var n=document.createElement("div");n.className="info";var r={title:e.getTitle(),description:e.getDescription(),dueDate:e.getDueDate(),priority:e.getPriority()},i=document.createElement("div");i.innerHTML="<span>Title: </span>".concat(r.title);var c=document.createElement("div");c.innerHTML="<span>Description: </span>".concat(r.description);var d=document.createElement("div");d.innerHTML="<span>Due Date: </span>".concat(r.dueDate.getDate(),"/").concat(r.dueDate.getMonth()+1,"/").concat(r.dueDate.getFullYear());var l=document.createElement("div");l.innerHTML="<span>Priority: </span>".concat(r.priority),n.appendChild(i),n.appendChild(c),n.appendChild(d),n.appendChild(l),t.appendChild(n),a.appendChild(t)}));var e=document.createElement("button");e.innerText="Add Task +",e.addEventListener("click",(function(){return l()})),a.appendChild(e)},d=function(e){window.addEventListener("mouseup",(function(t){t.target!=e&&t.target.parentNode!=e&&e.remove()}))},l=function(e){console.log(n.getName());var i=document.createElement("form"),o=document.createElement("h3"),l=document.createElement("label");l.innerText="Title";var u=document.createElement("input"),s=document.createElement("label");s.innerText="Description";var p=document.createElement("textarea"),m=document.createElement("label");m.innerText="Due Date";var g=document.createElement("input");g.type="date";var v=document.createElement("label");v.innerText="Priority";var f=document.createElement("select"),h=document.createElement("option");h.innerText="None",h.value="none";var T=document.createElement("option");T.innerText="High",T.value="high";var D=document.createElement("option");D.innerText="Medium",D.value="medium";var E=document.createElement("option");if(E.innerText="Low",E.value="low",e){o.innerText="Edit Task",u.value=e.getTitle(),p.value=e.getDescription();var k=e.getDueDate();g.valueAsDate=new Date(k.getFullYear(),k.getMonth(),k.getDate()),[h,T,D,E].find((function(t){return t.value===e.getPriority().toLowerCase()})).selected=!0}else o.innerText="New Task",h.selected=!0;var C=document.createElement("button");C.innerText="Add Task",C.addEventListener("click",(function(a){if(a.preventDefault(),e)e.setTitle(u.value),e.setDescription(p.value),e.setDueDate(new Date(g.valueAsDate.toUTCString())),e.setPriority(f.value);else{var o=t(u.value,p.value,new Date(g.valueAsDate),f.value);n.addTask(o),console.log(n.getTasks())}r.saveProjects(),c(),i.remove()})),d(i),f.appendChild(h),f.appendChild(T),f.appendChild(D),f.appendChild(E),i.appendChild(o),i.appendChild(l),i.appendChild(u),i.appendChild(s),i.appendChild(p),i.appendChild(m),i.appendChild(g),i.appendChild(v),i.appendChild(f),i.appendChild(C),a.appendChild(i)},u=function(t){console.log(t);var n=document.createElement("form"),a=document.createElement("h3"),o=document.createElement("input"),c=document.createElement("button");t?(a.innerText=t.getName(),c.innerText="Save",o.value=t.getName()):(a.innerText="New Project",c.innerText="Add"),c.addEventListener("click",(function(a){a.preventDefault(),t?t.setName(o.value):r.addProject(e(o.value)),p(),n.remove()})),d(n),n.appendChild(a),n.appendChild(o),n.appendChild(c),i.appendChild(n)},s=function(e){if("project-container"===e.target.className){var t=r.getProject(e.target.innerText);return n=r.getProject(t.getName()),""===a.innerHTML||(a.innerHTML=""),c(t.getName())}var i=r.getProject(e.path[1].innerText);"fas fa-trash-alt delete-project-button"===e.target.className?(r.deleteProject(i),r.saveProjects(),p()):"fas fa-pen edit-project-button"===e.target.className&&u(i)},p=function(){i.innerHTML="";var e=document.createElement("button");e.innerText="+ Add Project",e.id="add-project",e.addEventListener("click",(function(){return u()})),r.getProjects().forEach((function(e){var t=document.createElement("div");t.innerText=e.getName(),t.className="project-container",t.addEventListener("click",s);var n=document.createElement("i");n.className="fas fa-pen edit-project-button";var a=document.createElement("i");a.className="fas fa-trash-alt delete-project-button",t.appendChild(n),t.appendChild(a),i.appendChild(t)})),i.appendChild(e)};return{loadHomePage:function(){document.body.appendChild(i),document.body.appendChild(a)},loadHeader:p,loadTasks:c}}();r.getProjectsFromStorage(),console.log(r.getProjects()),i.loadHomePage(),i.loadHeader()})();